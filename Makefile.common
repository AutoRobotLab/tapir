# ----------------------------------------------------------------------
# Customizations
# ----------------------------------------------------------------------

#
# root directory of the package
#
ROOT := $(abspath $(dir $(lastword $(MAKEFILE_LIST))))

# Directories
SOLVER_SRCDIR := $(ROOT)/src
SOLVER_OBJDIR := $(ROOT)/obj
SOLVER_DEPDIR := $(ROOT)/dep

# Standard include directories.
INCDIRS += -I$(SOLVER_SRCDIR)
# Required libraries.
LIBDIRS +=
LDLIBS +=

# ----------------------------------------------------------------------
# Files
# ----------------------------------------------------------------------
#
SOLVER_SRCS := $(wildcard $(SOLVER_SRCDIR)/*.cpp)
SOLVER_HDRS := $(wildcard $(SOLVER_SRCDIR)/*.hpp)
SOLVER_OBJS := $(patsubst $(SOLVER_SRCDIR)/%.cpp, $(SOLVER_OBJDIR)/%.o, $(SOLVER_SRCS))
SOLVER_DEPS := $(patsubst $(SOLVER_SRCDIR)/%.cpp, $(SOLVER_DEPDIR)/%.d, $(SOLVER_SRCS))

# ----------------------------------------------------------------------
# Targets
# ----------------------------------------------------------------------/

$(SOLVER_OBJS):| $(SOLVER_OBJDIR) $(SOLVER_DEPDIR)
$(SOLVER_DEPDIR) $(SOLVER_OBJDIR):
	mkdir -p $@
$(SOLVER_OBJDIR)/%.o: $(SOLVER_SRCDIR)/%.cpp
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -MD -c $< -o $@
	@mv $(SOLVER_OBJDIR)/$*.d $(SOLVER_DEPDIR)/$*.d
